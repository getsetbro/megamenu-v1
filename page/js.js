var myData = [
  {
    Title: "Report Library",
    URL:
      "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/ReportLibrary.aspx",
    ChildLinks: [
      {
        Title: "Overall",
        URL: null,
        ChildLinks: [
          {
            Title: "Balanced Scorecard",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=480&ReportGroup=Balanced+Scorecard",
            ChildLinks: null
          },
          {
            Title: "Close for SHOPX",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=515&ReportGroup=Close+for+Safety,+Health+Outcomes,+Patient+Experience",
            ChildLinks: null
          },
          {
            Title: "Executive Dashboards",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=354&ReportGroup=Executive+Dashboards",
            ChildLinks: null
          }
        ]
      },
      {
        Title: "Safety & Quality",
        URL: null,
        ChildLinks: [
          {
            Title: "ADI",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=216&ReportGroup=ADI+-+Advocate+Data+Intelligence",
            ChildLinks: null
          },
          {
            Title: "Be Safe Tools Audit",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=321&ReportGroup=Be+Safe+Tools+Audit",
            ChildLinks: null
          },
          {
            Title: "Clinical Integration",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=432&ReportGroup=Clinical+Integration",
            ChildLinks: null
          },
          {
            Title: "Complications",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=13&ReportGroup=Complications",
            ChildLinks: null
          },
          {
            Title: "Core Measures",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=511&ReportGroup=Core+Measures",
            ChildLinks: null
          },
          {
            Title: "CPOE",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=31&ReportGroup=CPOE",
            ChildLinks: null
          },
          {
            Title: "Culture of Safety",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=505&ReportGroup=Culture+of+Safety+Survey",
            ChildLinks: null
          },
          {
            Title: "Falls",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=392&ReportGroup=Falls",
            ChildLinks: null
          },
          {
            Title: "HAC Composite",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=53&ReportGroup=HAC+Composite",
            ChildLinks: null
          },
          {
            Title: "ICU Ventilator Days",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=424&ReportGroup=ICU+Ventilator+Days",
            ChildLinks: null
          },
          {
            Title: "IHA Health Outcomes",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=67&ReportGroup=IHA+Health+Outcomes",
            ChildLinks: null
          },
          {
            Title: "Infection Prevention",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=454&ReportGroup=Infection+Prevention",
            ChildLinks: null
          },
          {
            Title: "Lab Panels",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=431&ReportGroup=Lab+Panels",
            ChildLinks: null
          },
          {
            Title: "Length of Stay",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=258&ReportGroup=Length+of+Stay",
            ChildLinks: null
          },
          {
            Title: "Mortality",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=105&ReportGroup=Mortality",
            ChildLinks: null
          },
          {
            Title: "Obstetrics",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=317&ReportGroup=Obstetrics",
            ChildLinks: null
          },
          {
            Title: "Readmissions",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=539&ReportGroup=Readmissions",
            ChildLinks: null
          },
          {
            Title: "Readmissions - ACH",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=107&ReportGroup=Readmissions+-+Pediatric",
            ChildLinks: null
          },
          {
            Title: "Restraints",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=359&ReportGroup=Restraints",
            ChildLinks: null
          },
          {
            Title: "RRT",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=137&ReportGroup=RRT",
            ChildLinks: null
          },
          {
            Title: "Safety Reporting",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=468&ReportGroup=Safety+Reporting",
            ChildLinks: null
          },
          {
            Title: "Sepsis",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=325&ReportGroup=Sepsis",
            ChildLinks: null
          },
          {
            Title: "Transfusions - System",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=143&ReportGroup=Transfusion+Safety+-+System",
            ChildLinks: null
          }
        ]
      },
      {
        Title: "Patient Experience",
        URL: null,
        ChildLinks: [
          {
            Title: "Benchmarks",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=166&ReportGroup=Patient+Experience+-+Benchmarks+for+CAHPS+and+PG+Surveys",
            ChildLinks: null
          },
          {
            Title: "Patient Detail",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=225&ReportGroup=Patient+Experience+-+Patient+Detail",
            ChildLinks: null
          },
          {
            Title: "Pediatric Satisfaction",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=373&ReportGroup=Patient+Experience+-+Pediatric+Satisfaction",
            ChildLinks: null
          },
          {
            Title: "Satisfaction",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=288&ReportGroup=Patient+Experience+-+Satisfaction",
            ChildLinks: null
          },
          {
            Title: "Service Reliability (CAHPS)",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=167&ReportGroup=Patient+Experience+-+Service+Reliability+(CAHPS)",
            ChildLinks: null
          }
        ]
      },
      {
        Title: "Coordinated Care",
        URL: null,
        ChildLinks: [
          {
            Title: "CMS Important Message",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=11&ReportGroup=CMS+Important+Message",
            ChildLinks: null
          },
          {
            Title: "Home Health Capture",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=56&ReportGroup=Home+Health+Capture+Rate",
            ChildLinks: null
          },
          {
            Title: "IPOC",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=238&ReportGroup=IPOC",
            ChildLinks: null
          },
          {
            Title: "Transition Prgm - Hospitals",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=165&ReportGroup=Transition+Program+-+Hospitals",
            ChildLinks: null
          }
        ]
      },
      {
        Title: "Enterprise Population Health",
        URL: null,
        ChildLinks: [
          {
            Title: "ACI",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=395&ReportGroup=APP+Accountable+Care+Index+Drill-Down",
            ChildLinks: null
          },
          {
            Title: "EPH CUI",
            URL:
              "http://sptestreports.advocatehealth.com/sites/chis/SYSTEM/Pages/reportviewer.aspx?ReportID=514&ReportGroup=Enterprise+Population+Health+Cost+and+Utilization+Index+Drill-Down",
            ChildLinks: null
          }
        ]
      }
    ]
  }
];

function do_menupage(global, document, megamenu) {
  var el_mm_page = document.getElementsByClassName("menu-page")[0];
  var el_mm_page_all = document.getElementsByClassName("menu-page-all")[0];
  var mm_page_entries = Object.entries(megamenu);
  var mm_page_links = [];
  var el_page_links = document.createElement("DIV"); // Create a <div> element
  el_page_links.className = "mm-page-links";

  var new_div_cat = function(name) {
    var el_d = document.createElement("H2"); // Create a <div> element
    el_d.className = "mm-page-category";
    el_d.innerText = name; // Insert text
    return el_d;
  };

  var new_a_link = function(o) {
    var el_a = document.createElement("A"); // Create a <a> element
    el_a.className = "mm-page-items-a";
    el_a.setAttribute("href", o.URL);
    el_a.innerText = o.Title; // Insert text
    return el_a;
  };

  mm_page_entries.forEach(function(kvp) {
    var name = kvp[0];
    var links = kvp[1];

    megamenu[name].div_cols = document.createElement("DIV"); // Create a <div> element
    megamenu[name].div_cols.className = "mm-page-columns";

    el_mm_page.appendChild(new_div_cat(name));

    links.forEach(function(link) {
      //add links
      megamenu[name].div_cols.appendChild(new_a_link(link));
      mm_page_links.push({ Title: link.Title, URL: link.URL, Category: name });
    });

    el_mm_page.appendChild(megamenu[name].div_cols);
  });

  mm_page_links.sort(function(a, b) {
    if (a.Title < b.Title) {
      return -1;
    }
    if (a.Title > b.Title) {
      return 1;
    }
    return 0;
  });
  mm_page_links.forEach(function(link) {
    //add links
    el_page_links.appendChild(new_a_link(link));
  });
  el_mm_page_all.appendChild(el_page_links);

  var el_mmpage_all = document.getElementsByClassName("mm-page-swapr-all")[0];
  el_mmpage_all.addEventListener("click", mm_showAll, false);
  function mm_showAll(e) {
    el_mmpage_cat.removeAttribute("name");
    el_mmpage_all.setAttribute("name", "active");
    el_mm_page.style.display = "none";
    el_mm_page_all.style.display = "block";
  }
  var el_mmpage_cat = document.getElementsByClassName("mm-page-swapr-cat")[0];
  el_mmpage_cat.addEventListener("click", mm_showCat, false);
  function mm_showCat(e) {
    el_mmpage_cat.setAttribute("name", "active");
    el_mmpage_all.removeAttribute("name");
    el_mm_page.style.display = "block";
    el_mm_page_all.style.display = "none";
  }
}

if (myData) {
  if (!Object.entries) {
    Object.entries = function(obj) {
      var ownProps = Object.keys(obj),
        i = ownProps.length,
        resArray = new Array(i); // preallocate the Array
      while (i--) resArray[i] = [ownProps[i], obj[ownProps[i]]];

      return resArray;
    };
  }

  var myMegamenu = {};
  myData[0].ChildLinks.forEach(function(cat) {
    myMegamenu[cat.Title] = [];
    cat.ChildLinks.forEach(function(link) {
      myMegamenu[cat.Title].push({ Title: link.Title, URL: link.URL });
    });
  });
  do_menupage(window, document, myMegamenu);
}

function showAll() {}
